<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - DailyOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            color: #d1d5db; /* Light gray text */
            background: linear-gradient(-45deg, #111827, #1f2937, #374151, #4f46e5);
            background-size: 400% 400%;
            animation: gradientBG 25s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #welcome-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #111827;
            display: flex; justify-content: center; align-items: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none;
        }
        #welcome-content { text-align: center; }
        #welcome-logo {
            font-size: 5rem;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: fadeInScale 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        #welcome-text {
            font-size: 2.5rem; font-weight: 600; color: white; opacity: 0;
            animation: fadeInSlideUp 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1s forwards;
        }
        #welcome-subtext {
            font-size: 1.25rem; color: #9ca3af; opacity: 0;
            animation: fadeInSlideUp 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1.5s forwards;
        }
        @keyframes fadeInScale { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeInSlideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .glass-effect {
            background-color: rgba(17, 24, 39, 0.8);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar { transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .sidebar-link { transition: background-color 0.2s, color 0.2s; }
        .sidebar-link .link-text { transition: opacity 0.3s ease; }

        .content-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        #logout-modal { transition: opacity 0.3s ease; }
        #logout-modal-content, #user-dropdown { transition: transform 0.2s ease, opacity 0.2s ease; }

        /* Z-index fix for dropdown */
        #user-dropdown { z-index: 50; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6366f1; }
    </style>
</head>
<body class="text-gray-300">

    <div id="welcome-screen">
    <div id="welcome-content">
        <!-- Logo -->
        <div id="welcome-logo" style="margin-bottom:20px;">
            <img src="remove.png" alt="DailyOS Logo">
        </div>
        
        <!-- Main Title -->
        <h1 id="welcome-text">DailyOS</h1>
        
        <!-- Subtext -->
        <p id="welcome-subtext" style="font-size:18px;max-width:400px;margin:auto;line-height:1.6;opacity:0.9;">
            Your personal digital companion â€” manage tasks, stay organized, and boost productivity with ease.
        </p>
    </div>
</div>

    
    <div class="relative min-h-screen lg:flex">
        <!-- Mobile Overlay -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden"></div>

        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar glass-effect fixed top-0 left-0 h-full w-64 shadow-lg flex-col z-30 -translate-x-full lg:translate-x-0 lg:relative lg:flex">
            <div class="p-6 text-center border-b border-gray-700/50">
                <h1 class="text-2xl font-bold text-white">
                    <a href="#" data-embed="home.html" class="nav-link"><i class="fas fa-rocket text-indigo-400"></i> <span class="link-text">DailyOS</span></a>
                </h1>
            </div>
            
            <nav class="flex-grow p-4 space-y-2">
                <a href="#" class="nav-link sidebar-link flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-indigo-600 hover:text-white" data-embed="home.html"><i class="fas fa-home fa-fw w-6"></i><span class="link-text ml-3">Home</span></a>
                <a href="#" class="nav-link sidebar-link flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-indigo-600 hover:text-white" data-embed="goalstudy.html"><i class="fas fa-bullseye fa-fw w-6"></i><span class="link-text ml-3">Personal Goals</span></a>
                <a href="#" class="nav-link sidebar-link flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-indigo-600 hover:text-white" data-embed="goals.html"><i class="fas fa-list-check fa-fw w-6"></i><span class="link-text ml-3">To-Do List</span></a>
                <a href="#" class="nav-link sidebar-link flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-indigo-600 hover:text-white" data-embed="TA.html"><i class="fas fa-wallet fa-fw w-6"></i><span class="link-text ml-3">Transactions</span></a>
                <a href="#" class="nav-link sidebar-link flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-indigo-600 hover:text-white" data-embed="setting.html"><i class="fas fa-cog fa-fw w-6"></i><span class="link-text ml-3">Settings</span></a>
                <a href="#" class="nav-link sidebar-link flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-indigo-600 hover:text-white" data-embed="AbotUS.html"><i class="fas fa-info-circle fa-fw w-6"></i><span class="link-text ml-3">About Us</span></a>
            </nav>

            <div class="p-4 border-t border-gray-700/50">
                <button id="logout-button" class="sidebar-link w-full flex items-center px-4 py-3 rounded-lg text-gray-300 hover:bg-red-600 hover:text-white mb-4">
                    <i class="fas fa-sign-out-alt fa-fw w-6"></i>
                    <span class="link-text ml-3">Logout</span>
                </button>
                <div class="text-xs text-gray-500 link-text">
                    <a href="terms&condition.html" target="_blank" class="hover:text-indigo-400 transition-colors">Terms</a> &bull;
                    <a href="privacy-poilicy.html" target="_blank" class="hover:text-indigo-400 transition-colors">Privacy and policy</a> &bull;
                    <a href="datadeletion.html" target="_blank" class="hover:text-indigo-400 transition-colors">Data Deletion</a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <header class="flex justify-between items-center p-4 glass-effect shadow-md border-b border-gray-700/50">
                <button id="sidebar-toggle" class="text-gray-300 hover:text-white focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <div class="flex items-center gap-4">
                    <div id="real-time-clock" class="text-sm text-gray-400 hidden md:block text-right"></div>
                    <div class="relative">
                        <button id="user-menu-button" class="flex items-center space-x-2">
                            <span id="user-email-short" class="text-sm hidden sm:block">Loading...</span>
                            <i class="fas fa-user-circle text-2xl text-indigo-400"></i>
                        </button>
                        <!-- User Dropdown -->
                        <div id="user-dropdown" class="absolute right-0 mt-2 w-64 glass-effect rounded-lg shadow-xl opacity-0 pointer-events-none transform scale-95">
                            <div class="p-4 border-b border-gray-700/50">
                                <p class="font-semibold text-white">Signed in as</p>
                                <p id="user-email-full" class="text-sm text-gray-400 truncate">...</p>
                            </div>
                            <a href="#" data-embed="setting.html" class="nav-link block px-4 py-3 text-sm text-gray-300 hover:bg-indigo-600 hover:text-white transition-colors"><i class="fas fa-cog fa-fw mr-3"></i>Settings</a>
                        </div>
                    </div>
                </div>
            </header>
            
            <div class="flex-1 overflow-y-auto p-4 sm:p-6" id="content-container-wrapper">
                <section id="content-container" class="glass-effect p-4 sm:p-6 rounded-lg shadow-lg min-h-full">
                    <!-- Embedded content will be loaded here -->
                </section>
            </div>
        </main>
    </div>

    <!-- Logout Confirmation Modal -->
    <div id="logout-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 opacity-0 pointer-events-none">
        <div id="logout-modal-content" class="glass-effect rounded-lg shadow-2xl p-8 w-full max-w-sm text-center transform scale-95 opacity-0">
            <div class="text-5xl text-red-500 mb-4"><i class="fas fa-exclamation-triangle"></i></div>
            <h2 class="text-2xl font-bold text-white mb-2">Confirm Logout</h2>
            <p class="text-gray-400 mb-6">Are you sure you want to sign out?</p>
            <div class="flex justify-center gap-4">
                <button id="cancel-logout" class="px-6 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors">Cancel</button>
                <button id="confirm-logout" class="px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">Logout</button>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyCS06RYItsN_lYq0ZI-Yfv2WRzyuac28EY",
            authDomain: "dailyos-f2eb6.firebaseapp.com",
            projectId: "dailyos-f2eb6",
            storageBucket: "dailyos-f2eb6.firebasestorage.app",
            messagingSenderId: "173476838340",
            appId: "1:173476838340:web:a0811c7c42615cf27f4291",
            measurementId: "G-QDM68MDX6S"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        onAuthStateChanged(auth, user => {
            if (!user) {
                window.location.href = 'login.html';
            } else {
                const email = user.email || 'Welcome!';
                document.getElementById('user-email-short').textContent = email;
                document.getElementById('user-email-full').textContent = email;
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            if (!sessionStorage.getItem('hasWelcomed')) {
                setTimeout(() => {
                    const welcomeScreen = document.getElementById('welcome-screen');
                    welcomeScreen.style.opacity = '0';
                    setTimeout(() => { welcomeScreen.style.display = 'none'; }, 500);
                    sessionStorage.setItem('hasWelcomed', 'true');
                }, 3000);
            } else {
                document.getElementById('welcome-screen').style.display = 'none';
            }
            
            const sidebar = document.getElementById('sidebar');
            const toggleButton = document.getElementById('sidebar-toggle');
            const overlay = document.getElementById('sidebar-overlay');
            const userMenuButton = document.getElementById('user-menu-button');
            const userDropdown = document.getElementById('user-dropdown');
            const navLinks = document.querySelectorAll('.nav-link');
            const contentContainer = document.getElementById('content-container');
            const clockElement = document.getElementById('real-time-clock');

            function updateClock() {
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                const dateString = now.toLocaleDateString([], { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                if (clockElement) {
                    clockElement.innerHTML = `<div>${dateString}</div><div>${timeString}</div>`;
                }
            }
            updateClock();
            setInterval(updateClock, 1000);

            function toggleSidebar() {
                const isMobile = window.innerWidth < 1024;
                if(isMobile) {
                    overlay.classList.toggle('hidden');
                    sidebar.classList.toggle('-translate-x-full');
                } else {
                    sidebar.classList.toggle('w-20');
                    sidebar.classList.toggle('w-64');
                    document.querySelectorAll('.link-text').forEach(text => text.classList.toggle('opacity-0'));
                }
            }

            toggleButton.addEventListener('click', toggleSidebar);
            overlay.addEventListener('click', toggleSidebar);

            userMenuButton.addEventListener('click', (e) => {
                e.stopPropagation();
                userDropdown.classList.toggle('opacity-0');
                userDropdown.classList.toggle('pointer-events-none');
                userDropdown.classList.toggle('scale-95');
            });

            window.addEventListener('click', () => {
                if (!userDropdown.classList.contains('opacity-0')) {
                    userDropdown.classList.add('opacity-0', 'pointer-events-none', 'scale-95');
                }
            });

            async function loadContent(url) {
                try {
                    contentContainer.innerHTML = `<div class="flex justify-center items-center h-full"><div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"></div></div>`;
                    const response = await fetch(url);
                    if (!response.ok) throw new Error('Content not found');
                    const content = await response.text();
                    contentContainer.innerHTML = content;
                    contentContainer.classList.add('content-fade-in');
                    setTimeout(() => contentContainer.classList.remove('content-fade-in'), 500);
                } catch (error) {
                    contentContainer.innerHTML = `<div class="text-center text-red-500 p-8"><h3>Error</h3><p>Could not load content. Please check the file path and ensure the server is running.</p></div>`;
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (link.parentElement.tagName === 'NAV') {
                         document.querySelectorAll('nav .nav-link').forEach(l => l.classList.remove('bg-indigo-600', 'text-white'));
                         link.classList.add('bg-indigo-600', 'text-white');
                    }
                    const url = link.getAttribute('data-embed');
                    if(url) {
                         loadContent(url);
                         if (window.innerWidth < 1024) toggleSidebar();
                    }
                });
            });

            document.querySelector('.nav-link[data-embed="home.html"]')?.click();

            const logoutButton = document.getElementById('logout-button');
            const logoutModal = document.getElementById('logout-modal');
            const logoutModalContent = document.getElementById('logout-modal-content');
            const cancelLogout = document.getElementById('cancel-logout');
            const confirmLogout = document.getElementById('confirm-logout');

            const showModal = () => {
                logoutModal.classList.remove('opacity-0', 'pointer-events-none');
                logoutModalContent.classList.remove('scale-95', 'opacity-0');
            };
            const hideModal = () => {
                logoutModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => logoutModal.classList.add('opacity-0', 'pointer-events-none'), 300);
            };

            logoutButton.addEventListener('click', showModal);
            cancelLogout.addEventListener('click', hideModal);
            confirmLogout.addEventListener('click', () => signOut(auth).catch(e => console.error('Logout failed:', e)));
        });
    </script>
</body>
</html>

